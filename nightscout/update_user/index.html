<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">

	<title>Update Site - Loop Docs</title>

        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <link href="../../css/base.css" rel="stylesheet">
        <link href="../../css/admonitions.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="../..">Loop Docs</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li >
                    <a href="../..">Home</a>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Setup <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    <a href="../../setup/overview/">Overview</a>
</li>

                    
                        
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Requirements</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../setup/requirements/pump/">Insulin Pump</a>
</li>

        
            
<li >
    <a href="../../setup/requirements/cgm/">CGM</a>
</li>

        
            
<li >
    <a href="../../setup/requirements/rileylink/">RileyLink</a>
</li>

        
            
<li >
    <a href="../../setup/requirements/computer/">Computer</a>
</li>

        
            
<li >
    <a href="../../setup/requirements/iphone/">iPhone</a>
</li>

        
            
<li >
    <a href="../../setup/requirements/appledev/">Apple Developer</a>
</li>

        
    </ul>
  </li>

                    
                        
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Build and Install</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../setup/build/installing/">Installing</a>
</li>

        
            
<li >
    <a href="../../setup/build/build_errors/">Build Errors</a>
</li>

        
            
<li >
    <a href="../../setup/build/code_customization/">Code Customization</a>
</li>

        
            
<li >
    <a href="../../setup/build/configuration/">Configuration</a>
</li>

        
            
<li >
    <a href="../../setup/build/updating/">Updating</a>
</li>

        
    </ul>
  </li>

                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Operation <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    <a href="../../operation/overview/">App Screens</a>
</li>

                    
                        
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">How To Loop</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../operation/loop/open-loop/">Open Loop</a>
</li>

        
            
<li >
    <a href="../../operation/loop/close-loop/">Closed Loop</a>
</li>

        
            
<li >
    <a href="../../operation/loop/green-loop/">Getting a Green Loop</a>
</li>

        
    </ul>
  </li>

                    
                        
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Features</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../operation/features/watch/">Apple Watch</a>
</li>

        
            
<li >
    <a href="../../operation/features/bolus/">Bolus</a>
</li>

        
            
<li >
    <a href="../../operation/features/carbs/">Carb Entries</a>
</li>

        
            
<li >
    <a href="../../operation/features/healthapp/">Health App</a>
</li>

        
            
<li >
    <a href="../../operation/features/widget/">iPhone widget</a>
</li>

        
            
<li >
    <a href="../../operation/features/notifications/">Loop Notifications</a>
</li>

        
            
<li >
    <a href="../../operation/features/workout/">Workout Targets</a>
</li>

        
    </ul>
  </li>

                    
                        
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Algorithm</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../operation/algorithm/overview/">Overview</a>
</li>

        
            
<li >
    <a href="../../operation/algorithm/bolus/">Bolus Recommendations</a>
</li>

        
            
<li >
    <a href="../../operation/algorithm/prediction/">Glucose Prediction</a>
</li>

        
            
<li >
    <a href="../../operation/algorithm/temp_basal/">Temp Basal Adjustments</a>
</li>

        
    </ul>
  </li>

                    
                        
<li >
    <a href="../../operation/new-version/">New Version Info</a>
</li>

                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Troubleshooting <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    <a href="../../troubleshooting/overview/">Overview</a>
</li>

                    
                        
<li >
    <a href="../../troubleshooting/mlab_cleanup/">mLab</a>
</li>

                    
                        
<li >
    <a href="../../troubleshooting/priming/">Priming and Sites</a>
</li>

                    
                        
<li >
    <a href="../../troubleshooting/rileylink/">RileyLink</a>
</li>

                    
                        
<li >
    <a href="../../troubleshooting/time-change/">Time Changes</a>
</li>

                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Nightscout <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    <a href="../overview/">Overview</a>
</li>

                    
                        
<li >
    <a href="../new_user/">Setup New Site</a>
</li>

                    
                        
<li class="active">
    <a href="./">Update Site</a>
</li>

                    
                        
<li >
    <a href="../azure_migration/">Azure to Heroku</a>
</li>

                    
                        
<li >
    <a href="../loop_pill/">Loop Pill</a>
</li>

                    
                        
<li >
    <a href="../ifttt/">IFTTT</a>
</li>

                    
                        
<li >
    <a href="../pebble/">Pebble</a>
</li>

                    
                        
<li >
    <a href="../pushover/">Remote Notifications</a>
</li>

                    
                        
<li >
    <a href="../reports/">Reports</a>
</li>

                    
                    </ul>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                <li >
                    <a rel="next" href="../new_user/">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../azure_migration/">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#updating-nightscout-site">UPDATING NIGHTSCOUT SITE</a></li>
        
            <li><a href="#updating-your-repository-in-github">Updating your repository in GitHub</a></li>
        
            <li><a href="#new-loopers-variables">New Loopers Variables</a></li>
        
            <li><a href="#event-history">EVENT HISTORY</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h1 id="updating-nightscout-site">UPDATING NIGHTSCOUT SITE<a class="headerlink" href="#updating-nightscout-site" title="Permanent link">⌁</a></h1>
<p>If you are new to Loop and haven’t updated your NS site since before December 1, 2016, you will want to update your NS site.  You can run either the "master" or "dev" branches of cgm-remote-monitor with Loop.  To check what version your Nightscout site is running, go to your Nightscout site and pull open the site settings by clicking on the three horizontal lines at the top right of the screen.  Scroll down and see if you are running 0.9.2-dev-20161201 or newer for "dev" branch.  Notice the “dev” branch is date stamped 0.9.x-dev-YYYMMDD; or you’ll see version 0.9.2 for "master" branch deployments.</p>
<p>If you are a current NS user and simply want to update your site, this procedure will work as well.</p>
<h2 id="updating-your-repository-in-github">Updating your repository in GitHub<a class="headerlink" href="#updating-your-repository-in-github" title="Permanent link">⌁</a></h2>
<ul>
<li>Copy, paste, and goto the one of the following links depending on which branch of cgm-remote-monitor you are currently running (replace <code>yourgithubname</code> with your actual GitHub user name)</li>
</ul>
<p>for master branch deployments:</p>
<p><code>https://github.com/yourgithubname/cgm-remote-monitor/compare/master...nightscout:master</code></p>
<p>For dev branch deployments:</p>
<p><code>https://github.com/yourgithubname/cgm-remote-monitor/compare/dev...nightscout:dev</code></p>
<p align="center">
<img src="../img/compare_repo.jpg" width="450">
</p>

<ul>
<li>Click the big green <code>Create pull request</code> button. Another screen will appear, fill in a title and click button to create the pull request, and then you can <code>Merge pull request</code>, and finally <code>Confirm merge</code>.</li>
</ul>
<hr />
<p><p align="center">
<img src="../img/update1.jpg" width="450">
</p> </p>
<hr />
<p><p align="center">
<img src="../img/update2.jpg" width="550">
</p> </p>
<hr />
<p><p align="center">
<img src="../img/update3.jpg" width="550">
</p> </p>
<hr />
<ul>
<li>
<p>Your cgm-remote-monitor repository is now up-to-date.  Nice work.</p>
</li>
<li>
<p>If you don’t have your Heroku set-up to automatically update when your repository is updated, you may have to go into your Heroku <code>Deploy</code> section and manually deploy your branch now that your repository has been updated.  Make sure you are connected to your GitHub cgm-remote-monitor repository.</p>
</li>
</ul>
<p align="center">
<img src="../img/deploy_branch.jpg" width="450">
</p>

<h2 id="new-loopers-variables">New Loopers Variables<a class="headerlink" href="#new-loopers-variables" title="Permanent link">⌁</a></h2>
<p>For new Loopers (but old Nightscout users), you will need to add some variables to your Heroku site to Loop.  </p>
<ul>
<li>Login to your Heroku site, select the <code>Settings</code> tab near the top of the screen on your Heroku app.</li>
</ul>
<p align="center">
<img src="../img/settings_heroku.jpg" width="450">
</p>

<ul>
<li>Click on <code>Reveal Config  Vars</code>.  Scroll down the bottom of the Config Vars lines until you find the last blank one.  You are going to add several additional lines of config vars for Loop use; the DEVICESTATUS_ADVANCED and ENABLE lines are required, the others just make Nightscout more useful when Looping.</li>
</ul>
<p align="center">
<img src="../img/add_vars.jpg" width="450">
</p>

<table>
<thead>
<tr>
<th>KEY</th>
<th>VALUE</th>
</tr>
</thead>
<tbody>
<tr>
<th>DEVICESTATUS_ADVANCED</th>
<td>true</td>
</tr>
<tr>
<th>PUMP_FIELDS</th>
<td>battery reservoir clock status</td>
</tr>
<tr>
<th>PUMP_RETRO_FIELDS</th>
<td>battery reservoir clock status</td>
</tr>
<tr>
<th>SHOW_FORECAST</th>
<td>loop</td>
</tr>
<tr>
<th>SHOW_PLUGINS</th>
<td>loop pump cob iob sage cage careportal</td>
</tr>
<tr>
<th>PUMP_ENABLE_ALERTS</th>
<td>true</td>
</tr>
<tr>
<th>PUMP_URGENT_BATT_U</th>
<td>30</br></br>(This is the pump battery percentage that will trigger a red, urgent alert in NS.)</td>
</tr>
<tr>
<th>PUMP_URGENT_BATT_V</th>
<td>1.25</br></br>(This is the pump battery voltage that will trigger a red, urgent alert in NS.)</td>
</tr>
<tr>
<th>PUMP_URGENT_RES</th>
<td>10</br></br>(This is the reservoir volume that will trigger a red, urgent alert in NS.)</td>
</tr>
<tr>
<th>PUMP_URGENT_CLOCK</th>
<td>30</td>
</tr>
<tr>
<th>LOOP_ENABLE_ALERTS</th>
<td>true</td>
</tr>
<tr>
<th>LOOP_WARN</th>
<td>20</br></br>(This is the minutes since Loop last successfully looped, the t1d will have a similar notification at this time through the Loop app.  This will be a yellow alert in NS.)</td>
</tr>
<tr>
<th>LOOP_URGENT</th>
<td>60</br></br>(Same as the alert above, but will be red in color and have a shorter snooze option.)</td>
</tr>
</tbody>
</table>

<ul>
<li>Click on <code>Open App</code> in the top right corner of your Heroku site.</li>
</ul>
<p align="center">
<img src="../img/open_app.jpg" width="450">
</p>

<ul>
<li>Click on the settings (those three horizontal lines in upper right corner).  Now check that your basal render is selected to either default or icicle (personal preference for how the temp basals show as blue lines in NS site), check the boxes that you’d like display pills in the SHOW PLUGINS (usually all of them), and then press save.  Your NIGHTSCOUT site is all set-up.  Congrats!</li>
</ul>
<p align="center">
<img src="../img/settings_ns.jpg" width="450">
</p>

<ul>
<li>Double check that your NS Profile settings are current and that you have a basal profile entered, if you want to see the temp basals that Loop is setting.</li>
</ul>
<h2 id="event-history">EVENT HISTORY<a class="headerlink" href="#event-history" title="Permanent link">⌁</a></h2>
<p>Don't forget to keep you Loop App's Preferred Source set to <code>Event History</code> if you want your NS site to smoothly integrate.  Preferred Source set to <code>Reservoir</code> will result in carbs not being uploaded and temp basals not being displayed.</p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            
            <center>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</center>
        </footer>

        <script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script>
        <script>var base_url = '../..';</script>
        <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
        <script src="../../js/base.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>